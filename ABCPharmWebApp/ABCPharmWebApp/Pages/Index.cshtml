@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>
<div>
    <table id="medicineGrid" class="table">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Brand</th>
                <th scope="col">Price</th>
                <th scope="col">Quantity</th>
                <th scope="col">Expiry</th>
            </tr>
        </thead>
        <tbody>
            @*<tr>
                <th scope="row">1</th>
                <td>Mark</td>
                <td>Otto</td>
                <td>Otto</td>
                <td>Otto</td>

            </tr>
            <tr>
                <th scope="row">2</th>
                <td>Jacob</td>
                <td>Thornton</td>
                <td>Thornton</td>
                <td>Thornton</td>

            </tr>
            <tr>
                <th scope="row">3</th>
                <td>Larry</td>
                <td>the Bird</td>
                <td>the Bird</td>
                <td>the Bird</td>

            </tr>*@
        </tbody>
    </table>
</div>
@section scripts

{
<script type="text/javascript">
    $(document).ready(function () {
        $.get('http://localhost:52556/medicine/api',  // url
            function (data, textStatus, jqXHR) {  // success callback
                alert('status: ' + textStatus + ', data:' + data);
                for (var item = 0; item < data.length; item++) {
                    if (data[item].quantity < 10) {
                        $("#medicineGrid tbody").append("<tr bgcolor='yellow'><td>" + data[item].name+"</td><td>" + data[item].brand + "</td><td>" + data[item].price + "</td><td>" + data[item].quantity + "</td><td>" + data[item].expiry + "</td></tr>");
                    }
                    else {
                        $("#medicineGrid tbody").append("<tr><td>" + data[item].name + "</td><td>" + data[item].brand + "</td><td>" + data[item].price + "</td><td>" + data[item].quantity + "</td><td>" + data[item].expiry + "</td></tr>");
                    }
                    
                }
            });
    })
</script>
}

